---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Container from "../../components/Container.astro";
import HeroInner from "../../components/PageBanner.astro";
import type { Product } from "../../lib/getProducts";
import { getProducts } from "../../lib/getProducts";

const products: Product[] = await getProducts();

// For now, weâ€™ll show all products on one page
const page = {
  data: products,
  url: { prev: undefined, next: undefined },
};

const title = "Our store";
const desc = "";
const image = "/hero-inner.webp";
---

<BaseLayout title="Our Store">
  <HeroInner title={title} desc={desc} image={image} />

  <Container>
    <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
      {
        page.data.map((p) => (
          <a
            href={`/store/${p.slug}`}
            class="rounded border p-4 hover:shadow-lg"
          >
            <img
              src={p.image}
              alt={p.title}
              class="h-48 w-full rounded object-cover"
            />
            <h2 class="mt-2 text-lg font-bold">{p.title}</h2>
            <p class="font-semibold text-gray-700">${p.price}</p>
          </a>
        ))
      }
    </div>
  </Container>
</BaseLayout>
